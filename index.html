<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>운전면허시험장 민원 안내(데모)</title>
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Apple SD Gothic Neo,Noto Sans KR,sans-serif;margin:0;background:#f6f7fb;color:#111}
    header{padding:18px 16px;background:#fff;border-bottom:1px solid #e9e9ef}
    h1{font-size:18px;margin:0}
    .wrap{max-width:820px;margin:0 auto;padding:16px}
    .card{background:#fff;border:1px solid #e9e9ef;border-radius:14px;padding:14px;margin:12px 0;box-shadow:0 1px 0 rgba(0,0,0,.02)}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:10px}
    button{width:100%;border:1px solid #e5e5ee;background:#fff;border-radius:12px;padding:12px 10px;font-size:15px;cursor:pointer}
    button:hover{background:#f2f4ff}
    .pill{display:inline-block;background:#eef2ff;border:1px solid #dfe6ff;color:#1f3fff;padding:4px 10px;border-radius:999px;font-size:12px}
    .muted{color:#5a5f6a;font-size:13px;line-height:1.5}
    .row{display:flex;gap:10px;flex-wrap:wrap}
    .row > div{flex:1;min-width:220px}
    textarea,input{width:100%;font-size:15px;border:1px solid #e5e5ee;border-radius:12px;padding:10px;box-sizing:border-box}
    a{color:#1f3fff;text-decoration:none}
    details summary{cursor:pointer}
    .k{font-weight:700}
    .footer{margin-top:24px;color:#707584;font-size:12px;text-align:center}
    .small{font-size:12px}
    .tag{display:inline-block;border:1px solid #e5e5ee;border-radius:999px;padding:3px 8px;font-size:12px;margin-right:6px;margin-top:6px}
    .danger{background:#fff5f5;border-color:#ffd5d5}
    .ok{background:#f3fff6;border-color:#d7ffe3}
  </style>
</head>
<body>
<header>
  <div class="wrap">
    <h1>운전면허시험장 민원 안내 <span class="pill">QR 데모</span></h1>
    <div class="muted">앱 설치 없이, QR로 접속해 반복 질문(준비물/수수료/어디로 가요/지금 되나요)을 빠르게 해결하는 시범 페이지입니다.</div>
  </div>
</header>

<div class="wrap">
  <div class="card">
    <div class="row">
      <div>
        <div class="k">업무를 선택하세요</div>
        <div class="muted small">※ 내용은 데모 문구입니다. 기관 기준 안내로 교체해 사용하세요.</div>
      </div>
      <div>
        <span class="tag ok">고령자 모드</span>
        <span class="tag">외국어(추후)</span>
        <span class="tag">통계(반자동)</span>
      </div>
    </div>
    <div class="grid" style="margin-top:10px">
      <button onclick="openTopic('reissue')">면허 재발급(분실/훼손)</button>
      <button onclick="openTopic('renewal')">면허 갱신</button>
      <button onclick="openTopic('fitness')">적성검사(고령자 포함)</button>
      <button onclick="openTopic('exchange')">외국면허 교환</button>
      <button onclick="openTopic('fee')">수수료/결제 안내</button>
      <button onclick="openTopic('where')">어디로 가요? (창구/동선)</button>
    </div>
  </div>

  <div class="card">
    <div class="k">빠른 질문(자유 입력) <span class="pill">간단 AI</span></div>
    <div class="muted">자주 묻는 질문을 키워드로 분류해 안내를 띄우는 ‘가벼운 AI’ 데모입니다(개인정보 입력 금지).</div>
    <div style="margin-top:10px">
      <input id="q" placeholder="예: 면허 분실했는데 뭐 가져가요? / 갱신 수수료 얼마예요? / 어디 창구로 가요?" />
      <div class="row" style="margin-top:10px">
        <div><button onclick="answer()">답변 보기</button></div>
        <div><button onclick="toggleSenior()">고령자 모드(큰 글씨)</button></div>
      </div>
      <div id="ans" class="card" style="display:none;margin-top:12px"></div>
    </div>
  </div>

  <div class="card">
    <details>
      <summary><span class="k">직원용: 반복 질문 기록(로컬 저장)</span> <span class="pill">통계</span></summary>
      <div class="muted">민원인이 많이 묻는 질문을 간단히 기록해두면, 내부 개선(안내문/배치/QR 위치)에 활용할 수 있습니다. 이 데모는 브라우저에만 저장됩니다.</div>
      <div style="margin-top:10px">
        <textarea id="logText" rows="3" placeholder="예: 재발급 준비물 문의 / 갱신 대상 여부 문의"></textarea>
        <div class="row" style="margin-top:10px">
          <div><button onclick="saveLog()">기록 저장</button></div>
          <div><button onclick="showStats()">간단 통계 보기</button></div>
        </div>
        <div id="stats" class="muted" style="margin-top:10px"></div>
      </div>
    </details>
  </div>

  <div class="footer">Demo v1 · 개인정보 입력 없이 사용 · 기관 안내로 문구 교체 후 배포</div>
</div>

<script>
const TOPICS = {
  reissue: {
    title: "면허 재발급(분실/훼손)",
    bullets: [
      "준비물: 신분증(예: 주민등록증/여권 등), 사진 필요 여부는 센터 기준 확인",
      "수수료: 센터 기준 금액 안내(예: 카드/현금 가능 여부 포함)",
      "처리: 당일 처리 여부 및 소요시간 안내",
      "주의: 본인 방문 원칙, 대리 신청 가능 조건은 센터 기준 확인"
    ],
    counterHint: "재발급 / 분실 / 훼손"
  },
  renewal: {
    title: "면허 갱신",
    bullets: [
      "대상: 갱신 시기 및 대상 여부는 센터 기준 확인(연령/종별/기간)",
      "준비물: 신분증, 사진/검사 필요 여부는 센터 기준",
      "수수료: 센터 기준 안내",
      "혼잡 시간대: 오전/점심 직후 혼잡 등 내부 공지 반영 가능"
    ],
    counterHint: "갱신 / 기간 / 대상"
  },
  fitness: {
    title: "적성검사(고령자 포함)",
    bullets: [
      "고령자 대상: 연령대별 주기/교육/검사 안내(센터 기준)",
      "준비물: 신분증, 검사 결과지 필요 여부 등",
      "절차: 접수 → 검사(해당 시) → 발급",
      "주의: 예약 필요 여부(온라인/전화) 있으면 명시"
    ],
    counterHint: "적성검사 / 고령 / 75세"
  },
  exchange: {
    title: "외국면허 교환",
    bullets: [
      "준비물: 여권/외국면허/출입국 서류 등 센터 기준",
      "번역/공증: 필요 여부 및 인정 범위 센터 기준",
      "수수료/처리기간: 센터 기준 안내",
      "참고: 국가별 요건 상이(센터 안내 링크 연결 권장)"
    ],
    counterHint: "외국면허 / 교환 / 여권"
  },
  fee: {
    title: "수수료/결제 안내",
    bullets: [
      "업무별 수수료 표를 한 눈에(재발급/갱신/적성검사 등)",
      "결제 수단: 카드/현금/계좌이체 가능 여부",
      "영수증/현금영수증 안내"
    ],
    counterHint: "수수료 / 결제 / 카드"
  },
  where: {
    title: "어디로 가요? (창구/동선)",
    bullets: [
      "업무별 창구 번호/층 안내(현장 표지판과 일치시키기)",
      "대기표 발권 위치 및 순서",
      "사진촬영/검사실 위치(해당 시)",
      "혼잡 시 대체 창구/안내 데스크 위치"
    ],
    counterHint: "창구 / 위치 / 어디"
  }
}

function openTopic(key){
  const t = TOPICS[key];
  const el = document.getElementById('ans');
  el.style.display='block';
  el.innerHTML = `
    <div class="k">${t.title}</div>
    <ul>${t.bullets.map(b=>`<li>${b}</li>`).join('')}</ul>
    <div class="muted small">※ 센터 기준 문구로 교체 후 사용하세요.</div>
  `;
  bumpCounter(key);
}

function toggleSenior(){
  const isSenior = document.body.classList.toggle('senior');
  document.body.style.fontSize = isSenior ? '18px' : '16px';
}

function normalize(s){
  return (s||"").toLowerCase().replace(/\s+/g,' ').trim();
}

function answer(){
  const q = normalize(document.getElementById('q').value);
  if(!q){ return; }
  // Simple keyword routing (demo)
  let key = null;
  if(/분실|재발급|훼손/.test(q)) key='reissue';
  else if(/갱신|기간|만료/.test(q)) key='renewal';
  else if(/적성|고령|75|70/.test(q)) key='fitness';
  else if(/외국|교환|여권|국가/.test(q)) key='exchange';
  else if(/수수|결제|카드|현금|돈/.test(q)) key='fee';
  else if(/어디|창구|위치|층|대기표/.test(q)) key='where';
  else key='where';

  openTopic(key);
  saveLogAuto(key, q);
}

function bumpCounter(key){
  const raw = localStorage.getItem('counters') || '{}';
  const counters = JSON.parse(raw);
  counters[key] = (counters[key]||0) + 1;
  localStorage.setItem('counters', JSON.stringify(counters));
}

function saveLogAuto(key, q){
  const item = {ts: new Date().toISOString(), key, q};
  const raw = localStorage.getItem('logs') || '[]';
  const logs = JSON.parse(raw);
  logs.push(item);
  localStorage.setItem('logs', JSON.stringify(logs));
}

function saveLog(){
  const text = document.getElementById('logText').value.trim();
  if(!text) return;
  saveLogAuto('manual', text);
  document.getElementById('logText').value='';
  document.getElementById('stats').innerText='저장되었습니다.';
}

function showStats(){
  const raw = localStorage.getItem('counters') || '{}';
  const counters = JSON.parse(raw);
  const entries = Object.entries(counters).sort((a,b)=>b[1]-a[1]);
  if(entries.length===0){
    document.getElementById('stats').innerText='아직 데이터가 없습니다.';
    return;
  }
  const lines = entries.map(([k,v])=>{
    const name = (TOPICS[k]||{title:k}).title;
    return `• ${name}: ${v}회`;
  }).join('\n');
  document.getElementById('stats').innerText = lines;
}
</script>
</body>
</html>
